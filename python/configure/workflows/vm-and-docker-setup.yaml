name: "VM and Docker Configuration"
description: "A workflow for configuring both virtual machine and Docker environments."

commands:
  - name: "CheckVirtualizationCmd"
  - name: "AptInstallCmd"
    environment:
      packages:
        - "qemu-kvm"
        - "libvirt-daemon-system"
        - "genisoimage"
        - "whois"
        - "mdadm"
  - name: "RemoveGrubOverrideCmd"
  - name: "InstallNvidiaDriverCmd"
  - name: "ConfigureDockerCmd"
  - name: "InstallNvidiaContainerToolkitCmd"
  - name: "InstallNvidiaCudaToolkitCmd"
  - name: "ConfigureLibvirtCmd"
  - name: "ReadGrubCmd"
  - name: "GetIommuTypeCmd"
  - name: "GetGpuPciIdsCmd"
  - name: "AddGrubVirtualizationOptionsCmd"
    environment:
      skip_vfio_binding: true
  - name: "UpdateInitramfsModulesCmd"
  - name: "CreateVfioConfCmd"
  - name: "CreateNvidiaNoDrmConfCmd"
  - name: "ConfigureGpuPowerCmd"
  - name: "ConfigureMemoryCmd"
  - name: "ConfigureDisksCmd"
  - name: "CreateGrubOverrideCmd"
  - name: "VerifyGpuPowerStateCmd"
